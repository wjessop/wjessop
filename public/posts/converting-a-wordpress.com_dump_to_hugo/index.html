<!doctype html>
<html lang="en">
	<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="/sass/styles.css">

		<link href="http://localhost:1313/rss.xml" rel="alternate" type="application/rss+xml" title="All posts | Will Jessop&#39;s Writings" />
		<title>
			Converting a wordpress.com dump to Hugo, including images
			</title>
		<meta
			name="description"
			content="I wrote a program for converting a wordpress.com dump, incliding images, to Hugo and markdown"
		/>
		<meta name="author" content="Will Jessop">
	</head>
	<body>
		<h1>Will Jessop&#39;s Writings</h1>
		<em></srong><p>Sailing, Food, Programming, Technology, and other things</p></em>
		<nav id="nav" class="nav justify-content-center">
	|
<a class="nav-link" href="/">Home</a> |
<a class="nav-link" href="/posts/">Posts</a> |
<a class="nav-link" href="/tags/">Tags</a> |
</nav>


		<div class="open-to-contracts">
		Do you have a Ruby on Rails application you'd like to be faster, more scalable, or just upgraded safely?
		I'm currently open to new contracts doing Ruby on Rails and Postgres scaling and performance work, and Rails upgrades.
		Contact me at <a href="mailto:will@willj.net?subject=Contract%20opportunity">will@willj.net</a> to get started.
		</div>
		<time datetime="2023-09-12">Tuesday, September 12, 2023</time>
	|
	tags:<a href="http://localhost:1313/tags/programming">programming</a> <a href="http://localhost:1313/tags/go">Go</a> <a href="http://localhost:1313/tags/tech">tech</a> <a href="http://localhost:1313/tags/meta">meta</a> 
	<hr />

	<h2>Converting a wordpress.com dump to Hugo, including images</h2>

	<article>
		<p>There are a few <a href="https://gohugo.io/tools/migrations/#wordpress">&ldquo;official&rdquo; options for migrating wordpress content to Hugo</a>, but they are all either cumbersome (requiring installing wordpress in docker) or don&rsquo;t handle images. I didn&rsquo;t want to spend too much time on this and definitely wanted images to be converted so wrote a quick program to handle the conversion for me.</p>
<p>In the end <a href="https://github.com/wjessop/wordpress_to_hugo">I created a somewhat rough, but functional program to do the job</a> and it was successful.</p>
<p>The requirements:</p>
<ul>
<li>Extracts tags where there are any on the original post and adds them to the front Hugo matter</li>
<li>Maintains the original post date</li>
<li>Converts the HTML to Markdown</li>
<li>Maintains the directory structure, with images copied to the directory that the post&rsquo;s index.md is in:
<pre tabindex="0"><code class="language-thing" data-lang="thing">basedir/
  content/
    posts/
      Some-post-title/
        index.md
        images/
          post-image-1.jpg
          post-image-2.png
     A-different-post-title/
      index.md
      images/
        post-image-for-this-other-arcicle.jpg
</code></pre></li>
</ul>
<p>There are some caveats:</p>
<ul>
<li>
<p><strong>Posts require some fixup</strong></p>
<p>There&rsquo;s a little bit of tweaking that I&rsquo;ve had to do to Hugo front matter or the posts, but the program got me mostly all the way. These things could likely be fixed in the code and it would be worth doing so if I was going to run the program more than once, but I&rsquo;m not so it was faster to fix things up manually.</p>
</li>
<li>
<p><strong>Doesn&rsquo;t write the summary</strong></p>
<p>I had to write this manually, but I was only dealing with 10s of posts. If you want to use this then you might want to add something to generate a summary.</p>
</li>
<li>
<p><strong>Doesn&rsquo;t always get the image URLs right in the markdown (but it&rsquo;s easily fixable)</strong></p>
<p>The code left a few images URLs in the posts pointing to the old wordpress site. It still copied over the images so it was a really simple find and replace to fix these up.</p>
</li>
<li>
<p><strong>Doesn&rsquo;t do any error checking, just panics</strong></p>
<p>It didn&rsquo;t error so I didn&rsquo;t put in the time to handle errors as it was a one-off program, it worked for me.</p>
</li>
<li>
<p><strong>Skips image only posts</strong></p>
<p>This was delberate, but you might want to add that feature.</p>
</li>
</ul>
<p>Anyway, the code got me 90% of the way to where I wanted the posts to get so worked well for what I wanted it to do and I&rsquo;d call it a success. <a href="https://github.com/wjessop/wordpress_to_hugo">I&rsquo;ve put the code up on Github</a>, I likely won&rsquo;t need to run this code again, but if it&rsquo;s useful to you please feel free to submit PRs.</p>

	</article>


		<footer>
	<hr>
	<p>You can contact me by <a href="mailto:will@willj.net">Email</a> and find me on <a href="https://github.com/wjessop/">Github</a>, <a rel="me" href="https://ruby.social/@wj">Mastodon</a>, and <a href="https://twitter.com/will_j">Twitter</a> (now largely abandoned).</p>
</footer>

	</body>
</html>
